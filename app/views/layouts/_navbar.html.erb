<nav class="navbar navbar-expand-xl navbar-dark bg-dark border-bottom border-secondary">
  <div class="container-md">
   
    <a class="navbar-brand d-flex align-items-center fw-bold text-white" href="<%= home_index_path %>">
      <i class="bi bi-vinyl-fill me-2 text-primary"></i>
      <span class="brand-text">ALBUMTRACKER</span>
    </a>

    <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSystem" aria-controls="navbarSystem" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSystem">
      <% if authenticated? %>
       
        <ul class="navbar-nav me-auto mb-2 mb-xl-0">
         
          <li class="nav-item">
            <%= link_to bands_path, class: "nav-link px-3 text-white fw-medium" do %>
              <i class="bi bi-music-note-list me-1"></i> Bands
            <% end %>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle px-3 text-white fw-medium" href="#" id="libraryDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-collection-play me-1"></i> Library
            </a>
            <ul class="dropdown-menu dropdown-menu-dark border-secondary bg-dark" aria-labelledby="libraryDropdown">
              <li class="dropend">
                <a class="dropdown-item dropdown-toggle d-flex justify-content-between align-items-center text-light bg-dark" href="#" data-bs-toggle="dropdown" data-bs-auto-close="outside">
                  <span><i class="bi bi-disc me-1"></i> Albums</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-dark border-secondary bg-dark">
                  <li><%= link_to albums_path, class: "dropdown-item text-light bg-dark" do %>
                    <i class="bi bi-list-ul me-2"></i> All Albums
                  <% end %></li>
                  <li><%= link_to new_album_path, class: "dropdown-item text-light bg-dark" do %>
                    <i class="bi bi-plus-circle me-2"></i> Add Album
                  <% end %></li>
                </ul>
              </li>
              <li class="dropend">
                <a class="dropdown-item dropdown-toggle d-flex justify-content-between align-items-center text-light bg-dark" href="#" data-bs-toggle="dropdown" data-bs-auto-close="outside">
                  <span><i class="bi bi-chat-square-text me-1"></i> Reviews</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-dark border-secondary bg-dark">
                  <li><%= link_to reviews_path, class: "dropdown-item text-light bg-dark" do %>
                    <i class="bi bi-list-ul me-2"></i> All Reviews
                  <% end %></li>
                  <li><%= link_to new_review_path, class: "dropdown-item text-light bg-dark" do %>
                    <i class="bi bi-plus-circle me-2"></i> Add Review
                  <% end %></li>
                </ul>
              </li>
            </ul>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle px-3 text-white fw-medium" href="#" id="forumDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="bi bi-chat-dots me-1"></i> Forum
            </a>
            <ul class="dropdown-menu dropdown-menu-dark border-secondary bg-dark" aria-labelledby="forumDropdown">
              <li class="dropend">
                <a class="dropdown-item dropdown-toggle d-flex justify-content-between align-items-center text-light bg-dark" href="#" data-bs-toggle="dropdown" data-bs-auto-close="outside">
                  <span><i class="bi bi-collection me-1"></i> Topics</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-dark border-secondary bg-dark">
                  <li><%= link_to topics_path, class: "dropdown-item text-light bg-dark" do %>
                    <i class="bi bi-list-ul me-2"></i> All Topics
                  <% end %></li>
                  <li><%= link_to new_topic_path, class: "dropdown-item text-light bg-dark" do %>
                    <i class="bi bi-plus-circle me-2"></i> New Topic
                  <% end %></li>
                </ul>
              </li>
              <li class="dropend">
                <a class="dropdown-item dropdown-toggle d-flex justify-content-between align-items-center text-light bg-dark" href="#" data-bs-toggle="dropdown" data-bs-auto-close="outside">
                  <span><i class="bi bi-chat-square-text me-1"></i> Posts</span>
                  
                </a>
                <ul class="dropdown-menu dropdown-menu-dark border-secondary bg-dark">
                  <li><%= link_to posts_path, class: "dropdown-item text-light bg-dark" do %>
                    <i class="bi bi-list-ul me-2"></i> All Posts
                  <% end %></li>
                  <li><%= link_to new_post_path, class: "dropdown-item text-light bg-dark" do %>
                    <i class="bi bi-plus-circle me-2"></i> New Post
                  <% end %></li>
                </ul>
              </li>
            </ul>
          </li>

          <% if Current.user&.admin? %>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle px-3 text-white fw-medium" href="#" id="adminDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-shield-check me-1"></i> Admin
              </a>
              <ul class="dropdown-menu dropdown-menu-dark border-secondary bg-dark" aria-labelledby="adminDropdown">
                <li><%= link_to users_path, class: "dropdown-item text-light bg-dark" do %>
                  <i class="bi bi-people me-2"></i> Users
                <% end %></li>
                <li><%= link_to genres_path, class: "dropdown-item text-light bg-dark" do %>
                  <i class="bi bi-tags me-2"></i> Genres
                <% end %></li>
                <li><%= link_to styles_path, class: "dropdown-item text-light bg-dark" do %>
                  <i class="bi bi-music-note-beamed me-2"></i> Styles
                <% end %></li>
              </ul>
            </li>
          <% end %>

          <li class="nav-item">
            <%= link_to favorites_path, class: "nav-link px-3 text-white fw-medium" do %>
              <i class="bi bi-heart me-1"></i> Favorites
            <% end %>
          </li>
        </ul>

        <ul class="navbar-nav ms-auto mb-2 mb-xl-0">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle d-flex align-items-center text-white fw-medium" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <% if Current.session.user.avatar.attached? %>
                <%= image_tag Current.session.user.avatar, class: "rounded-circle me-2 border border-light", style: "width: 28px; height: 28px; object-fit: cover;" %>
              <% else %>
                <i class="bi bi-person-circle me-2"></i>
              <% end %>
              <span class="user-name"><%= Current.session.user.name %></span>
            </a>
            <ul class="dropdown-menu dropdown-menu-dark border-secondary bg-dark dropdown-menu-end" aria-labelledby="userDropdown">
              <li><%= link_to user_path(Current.session.user), class: "dropdown-item text-light bg-dark" do %>
                <i class="bi bi-person me-2"></i> Profile
              <% end %></li>
              <li><hr class="dropdown-divider border-secondary"></li>
              <li>
                <%= button_to sessions_path, method: :delete, class: "dropdown-item text-light bg-dark border-0 w-100 text-start" do %>
                  <i class="bi bi-box-arrow-right me-2"></i> Logout
                <% end %>
              </li>
            </ul>
          </li>
        </ul>

      <% else %>
        <ul class="navbar-nav ms-auto mb-2 mb-xl-0">
          <li class="nav-item">
            <%= link_to new_sessions_path, class: "nav-link px-3 text-white fw-medium" do %>
              <i class="bi bi-box-arrow-in-right me-1"></i> Login
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to new_user_path, class: "nav-link px-3 text-white fw-medium" do %>
              <i class="bi bi-person-plus me-1"></i> Sign Up
            <% end %>
          </li>
        </ul>
      <% end %>
    </div>
  </div>
</nav>